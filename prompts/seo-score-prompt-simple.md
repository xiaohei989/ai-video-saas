# SEO 内容评分与优化建议系统

## 🎯 核心原则

1. **客观评估优先**: 优秀内容给高分(90+分可以0条建议),只对明显问题提建议
2. **只用定量标准**: 每条建议必须基于具体数字(长度/密度/分数),禁止主观判断
3. **改进幅度>10%**: 建议的改进必须带来至少10%的实质性提升,否则不提

---

## 📊 评分标准 (总分100分)

### 1️⃣ Meta 信息质量 (30分)

**Meta 标题 (15分)**:
- 长度50-65字符: 15分
- 长度45-49或66-70字符: 10分
- 其他长度: 5分
- 不含关键词: -5分
- 关键词位置>50字符: -3分

**Meta 描述 (15分)**:
- 长度140-165字符: 15分
- 长度130-139或166-175字符: 10分
- 其他长度: 5分
- 不含关键词: -5分
- 无CTA: -3分

### 2️⃣ 关键词优化 (25分)

**关键词密度**:
- 目标关键词1.5-2.5%: 15分
- 目标关键词1.0-1.4%或2.6-3.0%: 10分
- 目标关键词<1.0%或>3.0%: 5分
- 次要关键词总密度0.5-1.5%: 10分
- 次要关键词总密度<0.5%或>2.0%: 5分

### 3️⃣ 内容质量 (25分)

**结构与深度**:
- 内容≥1500字: 10分
- 内容1000-1499字: 7分
- 内容<1000字: 3分
- 有3+个二级标题: 8分
- FAQ≥3条: 7分

### 4️⃣ 可读性与用户体验 (20分)

**文本可读性**:
- 段落平均长度50-100字: 10分
- 有列表/代码块/引用: 10分

---

## ✅ 建议生成规则 (纯定量)

### 规则1: Meta 标题

```
IF 长度 < 50 OR 长度 > 70:
  → 建议调整到 55-60 字符

IF 不包含 {{targetKeyword}}:
  → 建议添加关键词到标题前40字符内

IF 关键词首次出现位置 > 50:
  → 建议将关键词移到前40字符

ELSE:
  → 不提任何Meta标题建议
```

### 规则2: Meta 描述

```
IF 长度 < 140 OR 长度 > 165:
  → 建议调整到 150-160 字符

IF 不包含 {{targetKeyword}}:
  → 建议添加关键词

IF 结尾无CTA词 (如: "Start now" / "Learn more" / "Get started" / "立即开始" / "了解更多"):
  → 建议添加CTA

ELSE:
  → 不提任何Meta描述建议
```

### 规则3: 关键词密度

```
IF 目标关键词密度 < 1.5% OR > 2.5%:
  当前密度 = {{keywordDensity}}
  目标密度 = 2.0%
  IF 当前 < 1.5%:
    → 建议增加关键词使用,目标密度2.0%
  IF 当前 > 2.5%:
    → 建议减少关键词使用,目标密度2.0%

IF 次要关键词总密度 < 0.5%:
  → 建议添加2-3个次要关键词,总密度达到1.0%

IF 次要关键词总密度 > 2.0%:
  → 建议减少次要关键词,总密度降到1.5%以下

ELSE:
  → 不提关键词密度建议
```

### 规则4: 内容结构

```
IF 总字数 < 1500:
  → 建议扩充到1500-2000字

IF 二级标题数量 < 3:
  → 建议添加至少3个结构化的二级标题 (##)

IF FAQ数量 < 3:
  → 建议添加至少3条高质量FAQ

ELSE:
  → 不提内容结构建议
```

### 规则5: 可读性

```
IF 缺少列表/代码块/引用:
  → 建议添加无序列表或引用块提升可读性

IF 有超长段落 (>150字):
  → 建议将长段落拆分为50-100字的短段落

ELSE:
  → 不提可读性建议
```

---

## 🔍 输出前强制检查清单

在输出JSON前,验证每一条 `suggestions` 数组中的建议:

### ✅ 检查1: 是否有定量依据?
- 每条建议必须包含具体数字 (字符数/密度值/分数)
- 示例: "调整到55-60字符" ✅ / "优化标题长度" ❌

### ✅ 检查2: 当前值是否已在合理范围?
- Meta标题50-70字符 → 删除建议
- Meta描述140-165字符 → 删除建议
- 关键词密度1.5-2.5% → 删除建议
- 关键词位置0-50字符 → 删除建议

### ✅ 检查3: 是否只是换词?
- "Master" → "Learn" (同义词替换) → 删除
- "Start now" → "Download guide" (CTA替换) → 删除
- 判断标准: 改动后长度变化<5字符 = 换词游戏

### ✅ 检查4: 改进幅度是否>10%?
- 57字符 → 60字符 (提升5%) → 删除
- 154字符 → 153字符 (提升0.6%) → 删除
- 判断标准: |新值-旧值|/旧值 < 0.1 → 删除建议

**如果建议数组经过4项检查后为空,直接返回空数组 `[]`**

---

## 📤 输出格式

```json
{
  "overall_score": 85,
  "dimension_scores": {
    "meta_info_quality": 25,
    "keyword_optimization": 20,
    "content_quality": 22,
    "readability": 18
  },
  "suggestions": [
    {
      "category": "关键词优化",
      "issue": "目标关键词'{{targetKeyword}}'密度为1.2%,低于理想范围(1.5-2.5%)",
      "suggestion": "建议在内容中自然增加关键词使用3-5次,使密度达到2.0%左右",
      "priority": "high",
      "expected_impact": "+5分"
    }
  ]
}
```

**优先级定义**:
- `high`: Meta信息问题、关键词密度<1.0%或>3.0%
- `medium`: 内容字数<1500、缺少FAQ
- `low`: 可读性优化、次要关键词

---

## 🌍 语言适配

当前内容语言: **{{languageName}}** ({{languageCode}})

**CTA词库** (按语言):
- **en**: Start now, Get started, Learn more, Try it today, Download now
- **zh**: 立即开始, 免费试用, 了解更多, 立即下载, 马上体验
- **ja**: 今すぐ始める, 詳細を見る, 無料で試す
- **ko**: 지금 시작, 자세히 알아보기, 무료 체험
- **es**: Empieza ahora, Aprende más, Prueba gratis
- **de**: Jetzt starten, Mehr erfahren, Kostenlos testen
- **fr**: Commencer maintenant, En savoir plus, Essai gratuit

**判断逻辑**: Meta描述结尾包含任意一个CTA词 → 有CTA,不提建议

---

## 📋 待分析内容

- **目标关键词**: {{targetKeyword}}
- **Meta标题**: {{metaTitle}}
- **Meta描述**: {{metaDescription}}
- **关键词密度**:
{{keywordDensity}}
- **引言**: {{guideIntro}}
- **正文内容**: {{guideContent}}
- **FAQ**:
{{faq}}

{{noKeywordWarning}}

---

## 🚨 重要:输出格式要求

**必须只返回JSON,不要添加任何Markdown格式、说明文字或代码块标记!**

输出示例(直接输出,不要用```json包裹):
```
{
  "overall_score": 85,
  "dimension_scores": {
    "meta_info_quality": 25,
    "keyword_optimization": 20,
    "content_quality": 22,
    "readability": 18
  },
  "suggestions": [...]
}
```

**严格要求**:
1. ❌ 不要输出 `## 标题` 或表格
2. ❌ 不要输出 "### 分析" 或任何Markdown
3. ❌ 不要用 \`\`\`json 代码块包裹
4. ✅ 只输出纯JSON对象,从 `{` 开始到 `}` 结束

**请立即输出JSON:**
