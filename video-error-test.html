<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘æ’­æ”¾é”™è¯¯æµ‹è¯• V2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .video-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        .video-section.problem {
            border-color: #ff6b6b;
            background-color: #fff5f5;
        }
        .video-section.normal {
            border-color: #51cf66;
            background-color: #f8fff8;
        }
        video {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 4px;
        }
        .error-info {
            margin-top: 10px;
            padding: 10px;
            background: #ffe6e6;
            border-left: 4px solid #ff4444;
            border-radius: 4px;
            font-size: 14px;
        }
        .success-info {
            margin-top: 10px;
            padding: 10px;
            background: #e6ffe6;
            border-left: 4px solid #44ff44;
            border-radius: 4px;
            font-size: 14px;
        }
        .device-info {
            background: #e6f3ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            min-height: 44px;
        }
        button:hover {
            background: #0056b3;
        }
        button:active {
            background: #004085;
        }
        .big-button {
            background: #28a745;
            font-size: 18px;
            padding: 15px 30px;
            font-weight: bold;
        }
        .big-button:hover {
            background: #1e7e34;
        }
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #007bff;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” è§†é¢‘æ’­æ”¾é”™è¯¯è¯Šæ–­æµ‹è¯•é¡µé¢ V2</h1>
        
        <div class="warning-box">
            <h3>âš ï¸ é”™è¯¯ä»£ç  20 (NotAllowedError) è§£å†³æ–¹æ¡ˆ</h3>
            <p><strong>é—®é¢˜åŸå› :</strong> ç§»åŠ¨æµè§ˆå™¨è¦æ±‚è§†é¢‘æ’­æ”¾å¿…é¡»ç”±ç”¨æˆ·æ‰‹åŠ¿è§¦å‘</p>
            <p><strong>è§£å†³æ–¹æ³•:</strong> å¿…é¡»å…ˆç‚¹å‡»ä¸‹é¢çš„"ğŸ¯ ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æµ‹è¯•"æŒ‰é’®</p>
        </div>

        <div class="device-info" id="deviceInfo">
            <h3>è®¾å¤‡ä¿¡æ¯</h3>
            <div id="deviceDetails">æ­£åœ¨æ£€æµ‹è®¾å¤‡ä¿¡æ¯...</div>
        </div>

        <!-- ç”¨æˆ·äº¤äº’æµ‹è¯•åŒºåŸŸ -->
        <div style="text-align: center; margin: 30px 0;">
            <h2>ğŸ‘† å¿…é¡»å…ˆè¿›è¡Œç”¨æˆ·äº¤äº’æµ‹è¯•</h2>
            <button class="big-button" onclick="startUserInteractionTest()">
                ğŸ¯ ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æµ‹è¯• (è§£å†³é”™è¯¯ä»£ç 20)
            </button>
        </div>

        <!-- é—®é¢˜è§†é¢‘ -->
        <div class="video-section problem">
            <h3>ğŸš¨ é—®é¢˜è§†é¢‘: fireplace-seduction-selfie.mp4</h3>
            <p><strong>URL:</strong> https://cdn.veo3video.me/templates/videos/fireplace-seduction-selfie.mp4?v=1758008502567</p>
            <p><strong>å·²çŸ¥é—®é¢˜:</strong> ç§»åŠ¨ç«¯æ— æ³•æ’­æ”¾ï¼Œç ç‡è¾ƒä½ (2.08 Mbps)</p>
            
            <video id="problemVideo" controls preload="none" webkit-playsinline playsinline>
                <source src="https://cdn.veo3video.me/templates/videos/fireplace-seduction-selfie.mp4?v=1758008502567" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
            </video>
            
            <div>
                <button onclick="testVideoWithUserGesture('problemVideo')">
                    <span class="step-number">1</span>æ‰‹åŠ¿æ’­æ”¾æµ‹è¯•
                </button>
                <button onclick="testVideoLoad('problemVideo')">
                    <span class="step-number">2</span>åŠ è½½æµ‹è¯•
                </button>
                <button onclick="checkVideoInfo('problemVideo')">
                    <span class="step-number">3</span>æŠ€æœ¯ä¿¡æ¯
                </button>
            </div>
            
            <div id="problemVideoResult"></div>
        </div>

        <!-- æ­£å¸¸å¯¹æ¯”è§†é¢‘ -->
        <div class="video-section normal">
            <h3>âœ… å¯¹æ¯”è§†é¢‘: æ­£å¸¸æ’­æ”¾çš„æ¨¡æ¿è§†é¢‘</h3>
            <p><strong>URL:</strong> https://cdn.veo3video.me/templates/videos/asmr-surreal-toast-spread.mp4</p>
            <p><strong>çŠ¶æ€:</strong> æ­£å¸¸æ’­æ”¾ï¼Œç ç‡é€‚ä¸­</p>
            
            <video id="normalVideo" controls preload="none" webkit-playsinline playsinline>
                <source src="https://cdn.veo3video.me/templates/videos/asmr-surreal-toast-spread.mp4" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
            </video>
            
            <div>
                <button onclick="testVideoWithUserGesture('normalVideo')">
                    <span class="step-number">1</span>æ‰‹åŠ¿æ’­æ”¾æµ‹è¯•
                </button>
                <button onclick="testVideoLoad('normalVideo')">
                    <span class="step-number">2</span>åŠ è½½æµ‹è¯•
                </button>
                <button onclick="checkVideoInfo('normalVideo')">
                    <span class="step-number">3</span>æŠ€æœ¯ä¿¡æ¯
                </button>
            </div>
            
            <div id="normalVideoResult"></div>
        </div>

        <div class="warning-box">
            <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤ï¼ˆæŒ‰é¡ºåºè¿›è¡Œï¼‰</h3>
            <p><span class="step-number">1</span> å…ˆç‚¹å‡»"ğŸ¯ ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æµ‹è¯•"å»ºç«‹ç”¨æˆ·äº¤äº’</p>
            <p><span class="step-number">2</span> ç‚¹å‡»"æ‰‹åŠ¿æ’­æ”¾æµ‹è¯•"æµ‹è¯•è§†é¢‘æ’­æ”¾</p>
            <p><span class="step-number">3</span> ç‚¹å‡»"åŠ è½½æµ‹è¯•"æ£€æŸ¥è§†é¢‘åŠ è½½çŠ¶æ€</p>
            <p><span class="step-number">4</span> ç‚¹å‡»"æŠ€æœ¯ä¿¡æ¯"æŸ¥çœ‹è§†é¢‘è¯¦ç»†å‚æ•°</p>
        </div>
    </div>

    <script>
        let userInteractionEstablished = false;

        // è®¾å¤‡ä¿¡æ¯æ£€æµ‹
        function detectDevice() {
            const ua = navigator.userAgent;
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua);
            const isIOS = /iPad|iPhone|iPod/.test(ua);
            const isAndroid = /Android/.test(ua);
            const browser = getBrowserName();
            const isHTTPS = location.protocol === 'https:';
            
            document.getElementById('deviceDetails').innerHTML = `
                <div><strong>ç”¨æˆ·ä»£ç†:</strong> ${ua}</div>
                <div><strong>è®¾å¤‡ç±»å‹:</strong> ${isMobile ? 'ğŸ“± ç§»åŠ¨è®¾å¤‡' : 'ğŸ–¥ï¸ æ¡Œé¢è®¾å¤‡'}</div>
                <div><strong>æ“ä½œç³»ç»Ÿ:</strong> ${isIOS ? 'ğŸ iOS' : isAndroid ? 'ğŸ¤– Android' : 'ğŸ’» å…¶ä»–'}</div>
                <div><strong>æµè§ˆå™¨:</strong> ${browser}</div>
                <div><strong>åè®®:</strong> ${isHTTPS ? 'ğŸ”’ HTTPS (å®‰å…¨)' : 'âš ï¸ HTTP (ä¸å®‰å…¨)'}</div>
                <div><strong>å±å¹•åˆ†è¾¨ç‡:</strong> ${window.screen.width}x${window.screen.height}</div>
                <div><strong>è§†çª—å¤§å°:</strong> ${window.innerWidth}x${window.innerHeight}</div>
                <div><strong>åƒç´ æ¯”:</strong> ${window.devicePixelRatio}</div>
            `;
        }

        function getBrowserName() {
            const ua = navigator.userAgent;
            if (ua.includes('CriOS')) return 'Chrome (iOS)';
            if (ua.includes('Chrome') && !ua.includes('Edge')) return 'Chrome';
            if (ua.includes('Firefox')) return 'Firefox';
            if (ua.includes('Safari') && !ua.includes('Chrome')) return 'Safari';
            if (ua.includes('Edge')) return 'Edge';
            return 'æœªçŸ¥æµè§ˆå™¨';
        }

        // æ˜¾ç¤ºç»“æœä¿¡æ¯
        function showResult(videoId, message, isSuccess = false) {
            const resultDiv = document.getElementById(videoId + 'Result');
            const className = isSuccess ? 'success-info' : 'error-info';
            resultDiv.innerHTML = `<div class="${className}">${message}</div>`;
            
            // åŒæ—¶å¼¹å‡ºæç¤º
            alert(message);
        }

        // ç”¨æˆ·äº¤äº’æµ‹è¯•
        function startUserInteractionTest() {
            userInteractionEstablished = true;
            
            const message = `âœ… ç”¨æˆ·äº¤äº’å·²å»ºç«‹ï¼
            
ğŸ“Š è¯¦ç»†ä¿¡æ¯:
- æ—¶é—´: ${new Date().toLocaleString()}
- è®¾å¤‡: ${navigator.userAgent.includes('Mobile') ? 'ç§»åŠ¨è®¾å¤‡' : 'æ¡Œé¢è®¾å¤‡'}
- æµè§ˆå™¨: ${getBrowserName()}
- åè®®: ${location.protocol}

ğŸ¯ ç°åœ¨å¯ä»¥è¿›è¡Œè§†é¢‘æ’­æ”¾æµ‹è¯•äº†ï¼
è¯·ç‚¹å‡»"æ‰‹åŠ¿æ’­æ”¾æµ‹è¯•"æŒ‰é’®ç»§ç»­ã€‚`;
            
            alert(message);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const button = event.target;
            button.style.background = '#28a745';
            button.innerHTML = 'âœ… ç”¨æˆ·äº¤äº’å·²å»ºç«‹';
            button.disabled = true;
        }

        // å¸¦ç”¨æˆ·æ‰‹åŠ¿çš„è§†é¢‘æ’­æ”¾æµ‹è¯•
        function testVideoWithUserGesture(videoId) {
            if (!userInteractionEstablished) {
                showResult(videoId, 'âŒ è¯·å…ˆç‚¹å‡»"ğŸ¯ ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æµ‹è¯•"å»ºç«‹ç”¨æˆ·äº¤äº’ï¼');
                return;
            }

            const video = document.getElementById(videoId);
            const startTime = Date.now();
            
            console.log(`å¼€å§‹ç”¨æˆ·æ‰‹åŠ¿æ’­æ”¾æµ‹è¯•: ${videoId}`);
            
            // å…ˆå°è¯•åŠ è½½è§†é¢‘
            video.load();
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬
            const events = {
                loadstart: 'å¼€å§‹åŠ è½½',
                loadedmetadata: 'å…ƒæ•°æ®åŠ è½½å®Œæˆ',
                loadeddata: 'æ•°æ®åŠ è½½å®Œæˆ', 
                canplay: 'å¯ä»¥æ’­æ”¾',
                canplaythrough: 'å¯ä»¥æµç•…æ’­æ”¾',
                play: 'å¼€å§‹æ’­æ”¾',
                playing: 'æ­£åœ¨æ’­æ”¾',
                error: 'å‘ç”Ÿé”™è¯¯',
                stalled: 'æ’­æ”¾åœæ»',
                waiting: 'ç­‰å¾…æ•°æ®'
            };
            
            const eventLog = [];
            
            Object.keys(events).forEach(eventName => {
                video.addEventListener(eventName, function(e) {
                    const elapsed = Date.now() - startTime;
                    const logEntry = `[${elapsed}ms] ${events[eventName]}`;
                    eventLog.push(logEntry);
                    console.log(`${videoId} - ${logEntry}`);
                    
                    if (eventName === 'error') {
                        const error = e.target.error;
                        const errorMsg = `âŒ è§†é¢‘åŠ è½½/æ’­æ”¾é”™è¯¯!

ğŸš¨ é”™è¯¯è¯¦æƒ…:
- è§†é¢‘ID: ${videoId}
- é”™è¯¯ä»£ç : ${error ? error.code : 'æœªçŸ¥'}
- é”™è¯¯ä¿¡æ¯: ${error ? getMediaErrorMessage(error.code) : 'æ— è¯¦ç»†ä¿¡æ¯'}
- ç½‘ç»œçŠ¶æ€: ${getNetworkState(video.networkState)}
- å°±ç»ªçŠ¶æ€: ${getReadyState(video.readyState)}

ğŸ“Š äº‹ä»¶æ—¥å¿—:
${eventLog.join('\\n')}

ğŸ”§ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤è§†é¢‘æ–‡ä»¶å­˜åœ¨
3. æ£€æŸ¥è§†é¢‘æ ¼å¼å…¼å®¹æ€§
4. å°è¯•ä½¿ç”¨HTTPSåè®®`;
                        
                        showResult(videoId, errorMsg);
                    }
                }, { once: true });
            });
            
            // å°è¯•æ’­æ”¾
            setTimeout(() => {
                const playPromise = video.play();
                
                if (playPromise !== undefined) {
                    playPromise
                        .then(() => {
                            const elapsed = Date.now() - startTime;
                            const successMsg = `âœ… è§†é¢‘æ’­æ”¾æˆåŠŸï¼

ğŸ“Š æ’­æ”¾è¯¦æƒ…:
- è§†é¢‘ID: ${videoId}
- æ’­æ”¾æ—¶é•¿: ${elapsed}ms
- å½“å‰æ—¶é—´: ${video.currentTime.toFixed(2)}s
- æ€»æ—¶é•¿: ${video.duration ? video.duration.toFixed(2) + 's' : 'æœªçŸ¥'}
- è§†é¢‘å°ºå¯¸: ${video.videoWidth}x${video.videoHeight}
- éŸ³é‡: ${video.volume}
- æ˜¯å¦é™éŸ³: ${video.muted ? 'æ˜¯' : 'å¦'}

ğŸ“‹ äº‹ä»¶æ—¥å¿—:
${eventLog.join('\\n')}

ğŸ‰ è¿™ä¸ªè§†é¢‘åœ¨æ‚¨çš„è®¾å¤‡ä¸Šå¯ä»¥æ­£å¸¸æ’­æ”¾ï¼`;
                            
                            showResult(videoId, successMsg, true);
                        })
                        .catch(error => {
                            const elapsed = Date.now() - startTime;
                            const errorMsg = `âŒ è§†é¢‘æ’­æ”¾å¤±è´¥ï¼

ğŸš¨ é”™è¯¯è¯¦æƒ…:
- è§†é¢‘ID: ${videoId}
- é”™è¯¯ç±»å‹: ${error.name}
- é”™è¯¯æ¶ˆæ¯: ${error.message}
- é”™è¯¯ä»£ç : ${error.code || 'æœªæä¾›'}
- ç”¨æ—¶: ${elapsed}ms

ğŸ“Š è§†é¢‘çŠ¶æ€:
- ç½‘ç»œçŠ¶æ€: ${getNetworkState(video.networkState)}
- å°±ç»ªçŠ¶æ€: ${getReadyState(video.readyState)}
- å½“å‰æ—¶é—´: ${video.currentTime}s
- æ˜¯å¦æš‚åœ: ${video.paused ? 'æ˜¯' : 'å¦'}

ğŸ“‹ äº‹ä»¶æ—¥å¿—:
${eventLog.join('\\n')}

ğŸ”§ å»ºè®®è§£å†³æ–¹æ¡ˆ:
${getErrorSolution(error.name, error.code)}`;
                            
                            showResult(videoId, errorMsg);
                        });
                } else {
                    showResult(videoId, 'âš ï¸ æµè§ˆå™¨ä¸æ”¯æŒ play() Promise API');
                }
            }, 500);
        }

        // è§†é¢‘åŠ è½½æµ‹è¯•
        function testVideoLoad(videoId) {
            const video = document.getElementById(videoId);
            const startTime = Date.now();
            
            video.addEventListener('loadedmetadata', function() {
                const elapsed = Date.now() - startTime;
                const loadMsg = `ğŸ“Š è§†é¢‘åŠ è½½æµ‹è¯•ç»“æœ:

âœ… åŸºæœ¬ä¿¡æ¯:
- åŠ è½½æ—¶é—´: ${elapsed}ms  
- æ€»æ—¶é•¿: ${video.duration ? video.duration.toFixed(2) + 's' : 'æœªçŸ¥'}
- è§†é¢‘å°ºå¯¸: ${video.videoWidth}x${video.videoHeight}
- ç½‘ç»œçŠ¶æ€: ${getNetworkState(video.networkState)}
- å°±ç»ªçŠ¶æ€: ${getReadyState(video.readyState)}

ğŸ“¡ ç½‘ç»œä¿¡æ¯:
- å½“å‰æº: ${video.currentSrc}
- é¢„åŠ è½½: ${video.preload}
- è·¨åŸŸ: ${video.crossOrigin || 'æœªè®¾ç½®'}

ğŸ’¡ ç»“è®º: ${video.readyState >= 1 ? 'âœ… è§†é¢‘å…ƒæ•°æ®åŠ è½½æ­£å¸¸' : 'âŒ è§†é¢‘å…ƒæ•°æ®åŠ è½½å¤±è´¥'}`;
                
                showResult(videoId, loadMsg, video.readyState >= 1);
            }, { once: true });
            
            video.addEventListener('error', function(e) {
                const elapsed = Date.now() - startTime;
                const error = e.target.error;
                const errorMsg = `âŒ è§†é¢‘åŠ è½½å¤±è´¥ï¼

ğŸš¨ åŠ è½½é”™è¯¯:
- ç”¨æ—¶: ${elapsed}ms
- é”™è¯¯ä»£ç : ${error ? error.code : 'æœªçŸ¥'}
- é”™è¯¯ä¿¡æ¯: ${error ? getMediaErrorMessage(error.code) : 'æ— è¯¦ç»†ä¿¡æ¯'}
- å½“å‰æº: ${video.currentSrc}

ğŸ”§ è§£å†³å»ºè®®:
${error ? getLoadErrorSolution(error.code) : 'è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œè§†é¢‘æ–‡ä»¶'}`;
                
                showResult(videoId, errorMsg);
            }, { once: true });
            
            // å¼€å§‹åŠ è½½
            video.load();
        }

        // æ£€æŸ¥è§†é¢‘è¯¦ç»†ä¿¡æ¯
        function checkVideoInfo(videoId) {
            const video = document.getElementById(videoId);
            
            const info = `ğŸ“Š è§†é¢‘æŠ€æœ¯è¯¦æƒ… - ${videoId}

ğŸ¬ åŸºæœ¬ä¿¡æ¯:
- å½“å‰æ—¶é—´: ${video.currentTime.toFixed(2)}s
- æ€»æ—¶é•¿: ${video.duration ? video.duration.toFixed(2) + 's' : 'æœªçŸ¥'}
- æ’­æ”¾çŠ¶æ€: ${video.paused ? 'â¸ï¸ æš‚åœ' : 'â–¶ï¸ æ’­æ”¾ä¸­'}
- é™éŸ³çŠ¶æ€: ${video.muted ? 'ğŸ”‡ å·²é™éŸ³' : 'ğŸ”Š æœ‰å£°éŸ³'}
- éŸ³é‡: ${(video.volume * 100).toFixed(0)}%
- æ’­æ”¾é€Ÿåº¦: ${video.playbackRate}x

ğŸ“º è§†é¢‘å±æ€§:
- è§†é¢‘å®½åº¦: ${video.videoWidth}px
- è§†é¢‘é«˜åº¦: ${video.videoHeight}px
- æ˜¾ç¤ºå®½åº¦: ${video.clientWidth}px
- æ˜¾ç¤ºé«˜åº¦: ${video.clientHeight}px
- å®½é«˜æ¯”: ${video.videoWidth && video.videoHeight ? (video.videoWidth/video.videoHeight).toFixed(2) : 'æœªçŸ¥'}

ğŸŒ ç½‘ç»œçŠ¶æ€:
- ç½‘ç»œçŠ¶æ€: ${getNetworkState(video.networkState)}
- å°±ç»ªçŠ¶æ€: ${getReadyState(video.readyState)}
- æ˜¯å¦å¯æ’­æ”¾: ${video.readyState >= 3 ? 'âœ… æ˜¯' : 'âŒ å¦'}
- ç¼“å†²èŒƒå›´: ${getBufferedRanges(video)}

ğŸ”— æºä¿¡æ¯:
- å½“å‰æº: ${video.currentSrc}
- é¢„åŠ è½½: ${video.preload}
- è·¨åŸŸè®¾ç½®: ${video.crossOrigin || 'æœªè®¾ç½®'}
- å¾ªç¯æ’­æ”¾: ${video.loop ? 'æ˜¯' : 'å¦'}

ğŸ“± ç§»åŠ¨ç«¯å±æ€§:
- å†…è”æ’­æ”¾: ${video.playsInline ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ'}
- è‡ªåŠ¨æ’­æ”¾: ${video.autoplay ? 'å¼€å¯' : 'å…³é—­'}`;
            
            alert(info);
            console.log(info);
        }

        function getBufferedRanges(video) {
            const buffered = video.buffered;
            if (buffered.length === 0) return 'æ— ç¼“å†²æ•°æ®';
            
            const ranges = [];
            for (let i = 0; i < buffered.length; i++) {
                ranges.push(`${buffered.start(i).toFixed(2)}s - ${buffered.end(i).toFixed(2)}s`);
            }
            return ranges.join(', ');
        }

        function getMediaErrorMessage(code) {
            const messages = {
                1: 'MEDIA_ERR_ABORTED - ç”¨æˆ·å–æ¶ˆäº†è§†é¢‘åŠ è½½',
                2: 'MEDIA_ERR_NETWORK - ç½‘ç»œé”™è¯¯å¯¼è‡´è§†é¢‘ä¸‹è½½å¤±è´¥', 
                3: 'MEDIA_ERR_DECODE - è§†é¢‘è§£ç é”™è¯¯',
                4: 'MEDIA_ERR_SRC_NOT_SUPPORTED - è§†é¢‘æ ¼å¼ä¸æ”¯æŒæˆ–æºæ— æ•ˆ'
            };
            return messages[code] || `æœªçŸ¥é”™è¯¯ä»£ç : ${code}`;
        }

        function getNetworkState(state) {
            const states = {
                0: 'NETWORK_EMPTY - æœªåˆå§‹åŒ–',
                1: 'NETWORK_IDLE - å·²é€‰æ‹©èµ„æºä½†æœªä½¿ç”¨ç½‘ç»œ',
                2: 'NETWORK_LOADING - æ­£åœ¨ä¸‹è½½æ•°æ®',
                3: 'NETWORK_NO_SOURCE - æœªæ‰¾åˆ°åˆé€‚çš„èµ„æº'
            };
            return states[state] || `æœªçŸ¥çŠ¶æ€: ${state}`;
        }

        function getReadyState(state) {
            const states = {
                0: 'HAVE_NOTHING - æ— æ•°æ®',
                1: 'HAVE_METADATA - æœ‰å…ƒæ•°æ®', 
                2: 'HAVE_CURRENT_DATA - æœ‰å½“å‰æ•°æ®',
                3: 'HAVE_FUTURE_DATA - æœ‰æœªæ¥æ•°æ®',
                4: 'HAVE_ENOUGH_DATA - æœ‰è¶³å¤Ÿæ•°æ®'
            };
            return states[state] || `æœªçŸ¥çŠ¶æ€: ${state}`;
        }

        function getErrorSolution(errorName, errorCode) {
            const solutions = {
                'NotAllowedError': 'â€¢ ç¡®ä¿é€šè¿‡ç”¨æˆ·æ‰‹åŠ¿è§¦å‘æ’­æ”¾\nâ€¢ å°è¯•å…ˆé™éŸ³æ’­æ”¾\nâ€¢ æ£€æŸ¥æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾æ”¿ç­–',
                'AbortError': 'â€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥ç¨³å®šæ€§\nâ€¢ é‡æ–°åŠ è½½é¡µé¢\nâ€¢ æ¸…é™¤æµè§ˆå™¨ç¼“å­˜',
                'NetworkError': 'â€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥\nâ€¢ ç¡®è®¤è§†é¢‘URLæœ‰æ•ˆ\nâ€¢ å°è¯•ä½¿ç”¨HTTPS',
                'NotSupportedError': 'â€¢ æ£€æŸ¥è§†é¢‘æ ¼å¼å…¼å®¹æ€§\nâ€¢ å°è¯•å…¶ä»–æµè§ˆå™¨\nâ€¢ ç¡®è®¤ç¼–è§£ç å™¨æ”¯æŒ'
            };
            
            return solutions[errorName] || 'â€¢ é‡æ–°åŠ è½½é¡µé¢\nâ€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥\nâ€¢ å°è¯•å…¶ä»–æµè§ˆå™¨';
        }

        function getLoadErrorSolution(code) {
            const solutions = {
                1: 'â€¢ ç”¨æˆ·å¯èƒ½å–æ¶ˆäº†åŠ è½½ï¼Œè¯·é‡è¯•',
                2: 'â€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥\nâ€¢ ç¡®è®¤è§†é¢‘æœåŠ¡å™¨æ­£å¸¸\nâ€¢ å°è¯•ä½¿ç”¨WiFi',
                3: 'â€¢ è§†é¢‘æ–‡ä»¶å¯èƒ½æŸå\nâ€¢ æ£€æŸ¥è§†é¢‘ç¼–ç æ ¼å¼\nâ€¢ è”ç³»æŠ€æœ¯æ”¯æŒ',
                4: 'â€¢ è§†é¢‘æ ¼å¼ä¸å—æ”¯æŒ\nâ€¢ æ£€æŸ¥æ–‡ä»¶æ‰©å±•å\nâ€¢ å°è¯•é‡æ–°ç¼–ç è§†é¢‘'
            };
            
            return solutions[code] || 'â€¢ é‡æ–°åŠ è½½é¡µé¢\nâ€¢ æ£€æŸ¥è§†é¢‘æ–‡ä»¶\nâ€¢ è”ç³»æŠ€æœ¯æ”¯æŒ';
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            console.log('è§†é¢‘é”™è¯¯æµ‹è¯•é¡µé¢ V2 åŠ è½½å®Œæˆ');
            detectDevice();
        });
    </script>
</body>
</html>