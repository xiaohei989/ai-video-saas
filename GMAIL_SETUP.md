# Gmail SMTP 配置指南

## 第一步：启用两步验证

1. 访问您的 [Google 账户设置](https://myaccount.google.com/)
2. 在左侧菜单中点击"安全性"
3. 在"登录 Google"部分，点击"两步验证"
4. 按照提示完成两步验证设置（如果尚未设置）

## 第二步：生成应用专用密码

1. 在"安全性"页面，确保两步验证已启用
2. 找到"应用专用密码"选项并点击
3. 在"选择应用"下拉菜单中选择"邮件"
4. 在"选择设备"下拉菜单中选择"其他（自定义名称）"
5. 输入名称如"AI Video SaaS"
6. 点击"生成"
7. Google 将显示一个16位的应用专用密码（格式：xxxx xxxx xxxx xxxx）

## 第三步：配置环境变量

将生成的信息添加到 `.env` 文件中：

```bash
# 替换为您的Gmail地址
GMAIL_USER=your-email@gmail.com

# 替换为生成的16位应用专用密码（去掉空格）
GMAIL_APP_PASSWORD=xxxxxxxxxxxxxxxx

# 系统安全邮箱（通常与GMAIL_USER相同）
VITE_SECURITY_EMAIL=your-email@gmail.com
```

## 第四步：重启应用

配置完成后，重启您的开发服务器以加载新的环境变量：

```bash
npm run dev
```

## 测试SMTP连接

您可以在Supabase本地开发环境中测试邮件发送：

```bash
# 启动Supabase本地环境
npx supabase start

# 查看本地邮件测试界面
# 访问 http://localhost:54324
```

## 常见问题

### 1. "应用专用密码"选项不可见
- 确保已启用两步验证
- 等待几分钟后刷新页面重试

### 2. 邮件发送失败
- 检查应用专用密码是否正确（去掉所有空格）
- 确认Gmail地址拼写正确
- 检查网络连接

### 3. 收不到验证邮件
- 检查垃圾邮件文件夹
- 确认邮箱地址正确
- 等待几分钟后重试

## 安全注意事项

1. **保护应用专用密码**：
   - 不要在代码中硬编码密码
   - 使用环境变量存储敏感信息
   - 定期更换应用专用密码

2. **生产环境建议**：
   - 考虑使用专业邮件服务（如SendGrid、AWS SES等）
   - 设置适当的发送频率限制
   - 监控邮件发送状态和配额

## 验证配置是否成功

配置完成后，尝试注册一个新账户：

1. 使用真实的邮箱地址注册
2. 检查是否收到验证邮件
3. 点击验证链接完成账户激活

如果配置正确，您应该能够：
- 收到格式良好的验证邮件
- 邮件发送者显示为"AI Video SaaS"
- 验证链接正常工作